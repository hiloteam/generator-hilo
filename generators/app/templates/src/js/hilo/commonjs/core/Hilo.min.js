/**
 * Hilo 1.1.10 for commonjs
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
var browser=require("../util/browser"),util=require("../util/util"),win=window,doc=document,docElem=doc.documentElement,uid=0,hasWarnedDict={},Hilo={version:"1.1.10",getUid:function(e){var t=++uid;if(e){var a=e.charCodeAt(e.length-1);return a>=48&&a<=57&&(e+="_"),e+t}return t},viewToString:function(e){for(var t,a=e;a;)t=t?a.id+"."+t:a.id,a=a.parent;return t},copy:function(e,t,a){return util.copy(e,t,a),hasWarnedDict.copy||(hasWarnedDict.copy=!0,console.warn("Hilo.copy has been Deprecated! Use Hilo.util.copy instead.")),e},browser:browser,event:{POINTER_START:browser.POINTER_START,POINTER_MOVE:browser.POINTER_MOVE,POINTER_END:browser.POINTER_END},align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(e){var t;try{t=e.getBoundingClientRect()}catch(a){t={top:e.offsetTop,left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight}}var o=(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)||0,r=(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0)||0,i=win.getComputedStyle?getComputedStyle(e):e.currentStyle,n=parseInt,s=n(i.paddingLeft)+n(i.borderLeftWidth)||0,c=n(i.paddingTop)+n(i.borderTopWidth)||0,d=n(i.paddingRight)+n(i.borderRightWidth)||0,l=n(i.paddingBottom)+n(i.borderBottomWidth)||0,h=t.top||0,f=t.left||0,g=t.right||0,p=t.bottom||0;return{left:f+o+s,top:h+r+c,width:g-d-f-s,height:p-l-h-c}},createElement:function(e,t){var a,o,r,i=doc.createElement(e);for(a in t)if(o=t[a],"style"===a)for(r in o)i.style[r]=o[r];else i[a]=o;return i},getElement:function(e){return doc.getElementById(e)},setElementStyleByView:function(e){var t=e.drawable,a=t.domElement.style,o=e._stateCache||(e._stateCache={}),r=Hilo.browser.jsVendor,i="px",n=!1;if(this.cacheStateIfChanged(e,["visible"],o)&&(a.display=e.visible?"":"none"),this.cacheStateIfChanged(e,["alpha"],o)&&(a.opacity=e.alpha),e.visible&&!(e.alpha<=0)){this.cacheStateIfChanged(e,["width"],o)&&(a.width=e.width+i),this.cacheStateIfChanged(e,["height"],o)&&(a.height=e.height+i),this.cacheStateIfChanged(e,["depth"],o)&&(a.zIndex=e.depth+1),(n=this.cacheStateIfChanged(e,["pivotX","pivotY"],o))&&(a[r+"TransformOrigin"]=e.pivotX+i+" "+e.pivotY+i),(this.cacheStateIfChanged(e,["x","y","rotation","scaleX","scaleY"],o)||n)&&(a[r+"Transform"]=this.getTransformCSS(e)),this.cacheStateIfChanged(e,["background"],o)&&(a.backgroundColor=e.background),a.pointerEvents||(a.pointerEvents="none");var s=t.image;if(s){var c=s.src;c!==o.image&&(o.image=c,a.backgroundImage="url("+c+")");var d=t.rect;if(d){var l=d[0],h=d[1];l!==o.sx&&(o.sx=l,a.backgroundPositionX=-l+i),h!==o.sy&&(o.sy=h,a.backgroundPositionY=-h+i)}}var f=e.mask;if(f){var g=f.drawable.domElement.style.backgroundImage;g!==o.maskImage&&(o.maskImage=g,a[r+"MaskImage"]=g,a[r+"MaskRepeat"]="no-repeat");var p=f.x,m=f.y;p===o.maskX&&m===o.maskY||(o.maskX=p,o.maskY=m,a[r+"MaskPosition"]=p+i+" "+m+i)}}},cacheStateIfChanged:function(e,t,a){var o,r,i,n,s=!1;for(o=0,r=t.length;o<r;o++)i=t[o],n=e[i],n!=a[i]&&(a[i]=n,s=!0);return s},getTransformCSS:function(e){var t=this.browser.supportTransform3D,a=t?"3d":"";return"translate"+a+"("+(e.x-e.pivotX)+"px, "+(e.y-e.pivotY)+(t?"px, 0px)":"px)")+"rotate"+a+(t?"(0, 0, 1, ":"(")+e.rotation+"deg)scale"+a+"("+e.scaleX+", "+e.scaleY+(t?", 1)":")")}};module.exports=Hilo;