/**
 * Hilo 1.1.7 for amd
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
define("hilo/util/drag",["hilo/core/Hilo"],function(t){var e={_isDragStart:!1,startDrag:function(e){function n(e){e.stopPropagation(),i(e),g.off(t.event.POINTER_START,n),g.__dragX=g.x-s.x,g.__dragY=g.y-s.y,_||(_=this.getStage()),_.on(t.event.POINTER_MOVE,a),document.addEventListener(t.event.POINTER_END,r),g.fire("dragStart",s)}function r(e){document.removeEventListener(t.event.POINTER_END,r),_&&_.off(t.event.POINTER_MOVE,a),g.on(t.event.POINTER_START,n),g.fire("dragEnd",s)}function a(t){i(t);var e=s.x+g.__dragX,n=s.y+g.__dragY;g.x=Math.max(f,Math.min(E,e)),g.y=Math.max(v,Math.min(T,n)),g.fire("dragMove",s)}function i(t){s.preX=s.x,s.preY=s.y,s.x=t.stageX,s.y=t.stageY}function o(){this._isDragStart=!1,document.removeEventListener(t.event.POINTER_END,r),_&&_.off(t.event.POINTER_MOVE,a),g.off(t.event.POINTER_START,n)}this._isDragStart&&this.stopDrag(),this._isDragStart=!0;var _,g=this;e=e||[-(1/0),-(1/0),1/0,1/0];var s={x:0,y:0,preX:0,preY:0},f=e[0],v=e[1],E=e[2]==1/0?1/0:f+e[2],T=e[3]==1/0?1/0:v+e[3];g.on(t.event.POINTER_START,n),g.stopDrag=o},stopDrag:function(){this._isDragStart=!1}};return e});