/**
 * Hilo 1.1.10 for cmd
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
define(function(t,e,r){var n=t("hilo/core/Hilo"),a={_isDragStart:!1,dragNeedTransform:!1,startDrag:function(t){function e(t){t.stopPropagation(),o(t),g.off(n.event.POINTER_START,e),E.x=g.x,E.y=g.y,g.dragNeedTransform&&g.parent&&g.parent.getConcatenatedMatrix().transformPoint(E),g.__dragX=E.x-_.x,g.__dragY=E.y-_.y,f||(f=g.getStage()),f.on(n.event.POINTER_MOVE,a),document.addEventListener(n.event.POINTER_END,r),g.fire("dragStart",_)}function r(t){document.removeEventListener(n.event.POINTER_END,r),f&&f.off(n.event.POINTER_MOVE,a),g.on(n.event.POINTER_START,e),g.fire("dragEnd",_)}function a(t){o(t),E.x=_.x+g.__dragX,E.y=_.y+g.__dragY,g.dragNeedTransform&&g.parent&&g.parent.getConcatenatedMatrix().invert().transformPoint(E),g.x=Math.max(d,Math.min(v,E.x)),g.y=Math.max(s,Math.min(T,E.y)),g.fire("dragMove",_)}function o(t){_.preX=_.x,_.preY=_.y,_.x=t.stageX,_.y=t.stageY}function i(){g._isDragStart=!1,document.removeEventListener(n.event.POINTER_END,r),f&&f.off(n.event.POINTER_MOVE,a),g.off(n.event.POINTER_START,e)}var g=this;g._isDragStart&&g.stopDrag(),g._isDragStart=!0;var f;t=t||[-(1/0),-(1/0),1/0,1/0];var _={x:0,y:0,preX:0,preY:0},d=t[0],s=t[1],v=t[2]==1/0?1/0:d+t[2],T=t[3]==1/0?1/0:s+t[3],E={x:0,y:0};g.on(n.event.POINTER_START,e),g.stopDrag=i},stopDrag:function(){this._isDragStart=!1}};return a});