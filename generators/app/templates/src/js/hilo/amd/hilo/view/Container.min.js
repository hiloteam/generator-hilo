/**
 * Hilo 1.0.0 for amd
 * Copyright 2015 alibaba.com
 * Licensed under the MIT License
 */
define("hilo/view/Container",["hilo/core/Hilo","hilo/core/Class","hilo/view/View"],function(e,i,r){var t=i.create({Extends:r,constructor:function(i){i=i||{},this.id=this.id||i.id||e.getUid("Container"),t.superclass.constructor.call(this,i),this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(e,i){var r=this.children,t=r.length,n=e.parent;i=0>i?0:i>t?t:i;var h=this.getChildIndex(e);if(h==i)return this;if(h>=0?(r.splice(h,1),i=i==t?t-1:i):n&&n.removeChild(e),r.splice(i,0,e),0>h)this._updateChildren(i);else{var l=i>h?h:i,d=i>h?i:h;this._updateChildren(l,d+1)}return this},addChild:function(e){for(var i=this.children.length,r=arguments,t=0,n=r.length;n>t;t++)this.addChildAt(r[t],i+t);return this},removeChildAt:function(e){var i=this.children;if(0>e||e>=i.length)return null;var r=i[e];if(r){if(!r.__renderer)for(var t=r;t=t.parent;){if(t.renderer){r.__renderer=t.renderer;break}if(t.__renderer){r.__renderer=t.__renderer;break}}r.__renderer&&r.__renderer.remove(r),r.parent=null,r.depth=-1}return i.splice(e,1),this._updateChildren(e),r},removeChild:function(e){return this.removeChildAt(this.getChildIndex(e))},removeChildById:function(e){for(var i,r=this.children,t=0,n=r.length;n>t;t++)if(i=r[t],i.id===e)return this.removeChildAt(t),i;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(e){var i=this.children;return 0>e||e>=i.length?null:i[e]},getChildById:function(e){for(var i,r=this.children,t=0,n=r.length;n>t;t++)if(i=r[t],i.id===e)return i;return null},getChildIndex:function(e){return this.children.indexOf(e)},setChildIndex:function(e,i){var r=this.children,t=r.indexOf(e);if(t>=0&&t!=i){var n=r.length;i=0>i?0:i>=n?n-1:i,r.splice(t,1),r.splice(i,0,e),this._updateChildren()}return this},swapChildren:function(e,i){var r=this.children,t=this.getChildIndex(e),n=this.getChildIndex(i);e.depth=n,r[n]=e,i.depth=t,r[t]=i},swapChildrenAt:function(e,i){var r=this.children,t=this.getChildAt(e),n=this.getChildAt(i);t.depth=i,r[i]=t,n.depth=e,r[e]=n},sortChildren:function(e){var i=e,r=this.children;if("string"==typeof i){var t=i;i=function(e,i){return i[t]-e[t]}}r.sort(i),this._updateChildren()},_updateChildren:function(e,i){for(var r,t=this.children,e=e||0,i=i||t.length,n=e;i>n;n++)r=t[n],r.depth=n+1,r.parent=this},contains:function(e){for(;e=e.parent;)if(e===this)return!0;return!1},getViewAtPoint:function(e,i,r,t,n){for(var h,l,d=t?[]:null,s=this.children,u=s.length-1;u>=0;u--)if(h=s[u],!(!h||!h.visible||h.alpha<=0||n&&!h.pointerEnabled))if(h.children&&h.children.length&&(!n||h.pointerChildren)&&(l=h.getViewAtPoint(e,i,r,t,n)),l){if(!t)return l;l.length&&(d=d.concat(l))}else if(h.hitTestPoint(e,i,r)){if(!t)return h;d.push(h)}return t&&d.length?d:null},render:function(e,i){t.superclass.render.call(this,e,i);var r,n,h,l=this.children.slice(0);for(r=0,n=l.length;n>r;r++)h=l[r],h.parent===this&&h._render(e,i)}});return t});