/**
 * Hilo 1.1.7 for commonjs
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
var Hilo=require("../core/Hilo"),drag={_isDragStart:!1,startDrag:function(t){function e(t){t.stopPropagation(),i(t),g.off(Hilo.event.POINTER_START,e),g.__dragX=g.x-s.x,g.__dragY=g.y-s.y,n||(n=this.getStage()),n.on(Hilo.event.POINTER_MOVE,a),document.addEventListener(Hilo.event.POINTER_END,r),g.fire("dragStart",s)}function r(t){document.removeEventListener(Hilo.event.POINTER_END,r),n&&n.off(Hilo.event.POINTER_MOVE,a),g.on(Hilo.event.POINTER_START,e),g.fire("dragEnd",s)}function a(t){i(t);var e=s.x+g.__dragX,r=s.y+g.__dragY;g.x=Math.max(_,Math.min(E,e)),g.y=Math.max(v,Math.min(f,r)),g.fire("dragMove",s)}function i(t){s.preX=s.x,s.preY=s.y,s.x=t.stageX,s.y=t.stageY}function o(){this._isDragStart=!1,document.removeEventListener(Hilo.event.POINTER_END,r),n&&n.off(Hilo.event.POINTER_MOVE,a),g.off(Hilo.event.POINTER_START,e)}this._isDragStart&&this.stopDrag(),this._isDragStart=!0;var n,g=this;t=t||[-(1/0),-(1/0),1/0,1/0];var s={x:0,y:0,preX:0,preY:0},_=t[0],v=t[1],E=t[2]==1/0?1/0:_+t[2],f=t[3]==1/0?1/0:v+t[3];g.on(Hilo.event.POINTER_START,e),g.stopDrag=o},stopDrag:function(){this._isDragStart=!1}};module.exports=drag;