/**
 * Hilo 1.0.0 for commonjs
 * Copyright 2015 alibaba.com
 * Licensed under the MIT License
 */
var Class=require("../core/Class"),Hilo=require("../core/Hilo"),drag={startDrag:function(e){function t(e){e.stopPropagation(),r(e),E.off(Hilo.event.POINTER_START,t),E.fire("dragStart",v),E.__dragX=E.x-v.x,E.__dragY=E.y-v.y,a||(a=this.getStage()),a.on(Hilo.event.POINTER_MOVE,n),document.addEventListener(Hilo.event.POINTER_END,o)}function o(e){document.removeEventListener(Hilo.event.POINTER_END,o),a&&a.off(Hilo.event.POINTER_MOVE,n),E.fire("dragEnd",v),E.on(Hilo.event.POINTER_START,t)}function n(e){r(e),E.fire("dragMove",v);var t=v.x+E.__dragX,o=v.y+E.__dragY;E.x=Math.max(f,Math.min(_,t)),E.y=Math.max(T,Math.min(g,o))}function r(e){v.preX=v.x,v.preY=v.y,v.x=e.stageX,v.y=e.stageY}function i(){document.removeEventListener(Hilo.event.POINTER_END,o),a&&a.off(Hilo.event.POINTER_MOVE,n),E.off(Hilo.event.POINTER_START,t)}var a,E=this,e=e||[-(1/0),-(1/0),1/0,1/0],v={x:0,y:0,preX:0,preY:0},f=e[0],T=e[1],_=e[2]==1/0?1/0:f+e[2],g=e[3]==1/0?1/0:T+e[3];E.on(Hilo.event.POINTER_START,t),E.stopDrag=i},stopDrag:function(){}};module.exports=drag;