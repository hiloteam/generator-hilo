/**
 * Hilo 1.1.10 for kissy
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
KISSY.add("hilo/util/drag",function(t,e){var r={_isDragStart:!1,dragNeedTransform:!1,startDrag:function(t){function r(t){t.stopPropagation(),o(t),g.off(e.event.POINTER_START,r),E.x=g.x,E.y=g.y,g.dragNeedTransform&&g.parent&&g.parent.getConcatenatedMatrix().transformPoint(E),g.__dragX=E.x-f.x,g.__dragY=E.y-f.y,d||(d=g.getStage()),d.on(e.event.POINTER_MOVE,n),document.addEventListener(e.event.POINTER_END,a),g.fire("dragStart",f)}function a(t){document.removeEventListener(e.event.POINTER_END,a),d&&d.off(e.event.POINTER_MOVE,n),g.on(e.event.POINTER_START,r),g.fire("dragEnd",f)}function n(t){o(t),E.x=f.x+g.__dragX,E.y=f.y+g.__dragY,g.dragNeedTransform&&g.parent&&g.parent.getConcatenatedMatrix().invert().transformPoint(E),g.x=Math.max(s,Math.min(v,E.x)),g.y=Math.max(_,Math.min(T,E.y)),g.fire("dragMove",f)}function o(t){f.preX=f.x,f.preY=f.y,f.x=t.stageX,f.y=t.stageY}function i(){g._isDragStart=!1,document.removeEventListener(e.event.POINTER_END,a),d&&d.off(e.event.POINTER_MOVE,n),g.off(e.event.POINTER_START,r)}var g=this;g._isDragStart&&g.stopDrag(),g._isDragStart=!0;var d;t=t||[-(1/0),-(1/0),1/0,1/0];var f={x:0,y:0,preX:0,preY:0},s=t[0],_=t[1],v=t[2]==1/0?1/0:s+t[2],T=t[3]==1/0?1/0:_+t[3],E={x:0,y:0};g.on(e.event.POINTER_START,r),g.stopDrag=i},stopDrag:function(){this._isDragStart=!1}};return r},{requires:["hilo/core/Hilo"]});