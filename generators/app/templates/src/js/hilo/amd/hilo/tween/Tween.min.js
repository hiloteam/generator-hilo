/**
 * Hilo 1.1.7 for amd
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
define("hilo/tween/Tween",["hilo/core/Class"],function(e){var t=function(){function r(){return+new Date}return e.create({constructor:function(e,t,r,a){var n=this;n.target=e,n._startTime=0,n._seekTime=0,n._pausedTime=0,n._pausedStartTime=0,n._reverseFlag=1,n._repeatCount=0,3==arguments.length&&(a=r,r=t,t=null);for(var i in a)n[i]=a[i];n._fromProps=t,n._toProps=r,!a.duration&&a.time&&(n.duration=a.time||0,n.time=0)},target:null,duration:1e3,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,isStart:!1,onStart:null,onUpdate:null,onComplete:null,setProps:function(e,t){var r=this,a=r.target,n=e||t,i=r._fromProps={},s=r._toProps={};e=e||a,t=t||a;for(var o in n)s[o]=t[o]||0,a[o]=i[o]=e[o]||0;return r},start:function(){var e=this;return e._startTime=r()+e.delay,e._seekTime=0,e._pausedTime=0,e.paused=!1,t.add(e),e},stop:function(){return t.remove(this),this},pause:function(){var e=this;return e.paused=!0,e._pausedStartTime=r(),e},resume:function(){var e=this;return e.paused=!1,e._pausedStartTime&&(e._pausedTime+=r()-e._pausedStartTime),e._pausedStartTime=0,e},seek:function(e,a){var n=this,i=r();return n._startTime=i,n._seekTime=e,n._pausedTime=0,void 0!==a&&(n.paused=a),n._update(i,!0),t.add(n),n},link:function(e){var r,a,n=this,i=e.delay,s=n._startTime;return"string"==typeof i&&(r=0==i.indexOf("+"),a=0==i.indexOf("-"),i=r||a?Number(i.substr(1))*(r?1:-1):Number(i)),e.delay=i,e._startTime=r||a?s+n.duration+i:s+i,n._next=e,t.remove(e),e},_render:function(e){var t,r=this,a=r.target,n=r._fromProps;for(t in n)a[t]=n[t]+(r._toProps[t]-n[t])*e},_update:function(e,a){var n=this;if(!n.paused||a){var i=e-n._startTime-n._pausedTime+n._seekTime;if(!(i<0)){var s,o=i/n.duration,u=!1;o=o<=0?0:o>=1?1:o;var p=n.ease?n.ease(o):o;n.reverse&&(n._reverseFlag<0&&(o=1-o,p=1-p),o<1e-7&&(n.repeat>0&&n._repeatCount++>=n.repeat||0==n.repeat&&!n.loop?u=!0:(n._startTime=r(),n._pausedTime=0,n._reverseFlag*=-1))),n.isStart||(n.setProps(n._fromProps,n._toProps),n.isStart=!0,n.onStart&&n.onStart.call(n,n)),n.time=i,n._render(p),(s=n.onUpdate)&&s.call(n,o,n),o>=1&&(n.reverse?(n._startTime=r(),n._pausedTime=0,n._reverseFlag*=-1):n.loop||n.repeat>0&&n._repeatCount++<n.repeat?(n._startTime=r()+n.repeatDelay,n._pausedTime=0):u=!0);var l=n._next;if(l&&l.time<=0){var _=l._startTime;_>0&&_<=e?(l._render(o),l.time=i,t.add(l)):u&&(_<0||_>e)&&l.start()}return u?((s=n.onComplete)&&s.call(n,n),!0):void 0}}},Statics:{_tweens:[],tick:function(){var e,a,n=t._tweens,i=n.length;for(a=0;a<i;a++)e=n[a],e&&e._update(r())&&(n.splice(a,1),a--);return t},add:function(e){var r=t._tweens;return r.indexOf(e)==-1&&r.push(e),t},remove:function(e){var r,a;if(e instanceof Array){for(r=0,a=e.length;r<a;r++)t.remove(e[r]);return t}var n=t._tweens;if(e instanceof t)r=n.indexOf(e),r>-1&&n.splice(r,1);else for(r=0;r<n.length;r++)n[r].target===e&&(n.splice(r,1),r--);return t},removeAll:function(){return t._tweens.length=0,t},fromTo:function(e,r,a,n){n=n||{};var i=e instanceof Array;e=i?e:[e];var s,o,u=n.stagger,p=[];for(o=0;o<e.length;o++)s=new t(e[o],r,a,n),u&&(s.delay=(n.delay||0)+(o*u||0)),s.start(),p.push(s);return i?p:s},to:function(e,r,a){return t.fromTo(e,null,r,a)},from:function(e,r,a){return t.fromTo(e,r,null,a)}}})}();return t});