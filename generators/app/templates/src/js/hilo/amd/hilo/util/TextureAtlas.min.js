/**
 * Hilo 1.0.0 for amd
 * Copyright 2015 alibaba.com
 * Licensed under the MIT License
 */
define("hilo/util/TextureAtlas",["hilo/core/Class"],function(r){var t=function(){function t(r){var t=r.frames;if(!t)return null;var e,n=[];if(t instanceof Array)for(var a=0,i=t.length;i>a;a++)e=t[a],n[a]={image:r.image,rect:e};else for(var o=t.frameWidth,s=t.frameHeight,f=r.width/o|0,u=r.height/s|0,l=t.numFrames||f*u,a=0;l>a;a++)n[a]={image:r.image,rect:[a%f*o,(a/f|0)*s,o,s]};return n}function e(r,t){var e=r.sprites;if(!e)return null;var i,o,s,f={};for(var u in e){if(i=e[u],a(i))o=n(t[i]);else if(i instanceof Array){o=[];for(var l=0,c=i.length;c>l;l++){var h,m=i[l];a(m)?s=n(t[m]):(h=m.rect,a(h)&&(h=t[m.rect]),s=n(h,m)),o[l]=s}}else{o=[];for(var l=i.from;l<=i.to;l++)o[l-i.from]=n(t[l],i[l])}f[u]=o}return f}function n(r,t){var e={image:r.image,rect:r.rect};return t&&(e.name=t.name||null,e.duration=t.duration||0,e.stop=!!t.stop,e.next=t.next||null),e}function a(r){return"number"==typeof r}return r.create({constructor:function(r){this._frames=t(r),this._sprites=e(r,this._frames)},_frames:null,_sprites:null,getFrame:function(r){var t=this._frames;return t&&t[r]},getSprite:function(r){var t=this._sprites;return t&&t[r]},Statics:{createSpriteFrames:function(r,t,e,n,a,i,o){if("[object Array]"===Object.prototype.toString.call(r)){for(var t=[],s=0,f=r.length;f>s;s++)t=t.concat(this.createSpriteFrames.apply(this,r[s]));return t}if("string"==typeof t){var u=t.split(",");t=[];for(var l=0,c=u.length;c>l;l++){var h=u[l].split("-");if(1==h.length)t.push(parseInt(h[0]));else for(var s=parseInt(h[0]),f=parseInt(h[1]);f>=s;s++)t.push(s)}}for(var m=Math.floor(e.width/n),s=0;s<t.length;s++){var p=t[s];t[s]={rect:[n*(p%m),a*Math.floor(p/m),n,a],image:e,duration:o}}return t[0].name=r,i?t[t.length-1].next=r:t[t.length-1].stop=!0,t}}})}();return t});