/**
 * Hilo 1.1.7 for kissy
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
KISSY.add("hilo/util/drag",function(t,e){var r={_isDragStart:!1,startDrag:function(t){function r(t){t.stopPropagation(),i(t),_.off(e.event.POINTER_START,r),_.__dragX=_.x-g.x,_.__dragY=_.y-g.y,s||(s=this.getStage()),s.on(e.event.POINTER_MOVE,a),document.addEventListener(e.event.POINTER_END,n),_.fire("dragStart",g)}function n(t){document.removeEventListener(e.event.POINTER_END,n),s&&s.off(e.event.POINTER_MOVE,a),_.on(e.event.POINTER_START,r),_.fire("dragEnd",g)}function a(t){i(t);var e=g.x+_.__dragX,r=g.y+_.__dragY;_.x=Math.max(v,Math.min(f,e)),_.y=Math.max(E,Math.min(T,r)),_.fire("dragMove",g)}function i(t){g.preX=g.x,g.preY=g.y,g.x=t.stageX,g.y=t.stageY}function o(){this._isDragStart=!1,document.removeEventListener(e.event.POINTER_END,n),s&&s.off(e.event.POINTER_MOVE,a),_.off(e.event.POINTER_START,r)}this._isDragStart&&this.stopDrag(),this._isDragStart=!0;var s,_=this;t=t||[-(1/0),-(1/0),1/0,1/0];var g={x:0,y:0,preX:0,preY:0},v=t[0],E=t[1],f=t[2]==1/0?1/0:v+t[2],T=t[3]==1/0?1/0:E+t[3];_.on(e.event.POINTER_START,r),_.stopDrag=o},stopDrag:function(){this._isDragStart=!1}};return r},{requires:["hilo/core/Hilo"]});